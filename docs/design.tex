\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[a4paper, margin=2cm]{geometry}
\usepackage{hyperref}
\usepackage{paralist}
\usepackage[table]{xcolor}
\usepackage{tikz-uml}


\begin{document}
\thispagestyle{empty}
\tikzumlset{fill object=black!10, fill call=black!10}
\begin{figure}[h]
\begin{center}
\begin{tikzpicture}
\begin{umlseqdiag}
    \umlactor[no ddots]{User}
    \umlbasicobject{Qualtrics}
    \umlbasicobject{thiscovery-surveys}
    \umlbasicobject{thiscovery-core}
    \umlbasicobject{HubSpot}
    \begin{umlcall}[op=consent to task, return=proceed to task, padding=4]{User}{Qualtrics}\end{umlcall}
    \begin{umlcall}[op=consent notification, type=asynchron]{Qualtrics}{thiscovery-surveys}\end{umlcall}
    \begin{umlcall}[op=fetch project data, return=data, padding=4]{thiscovery-surveys}{thiscovery-core}\end{umlcall}
    \begin{umlcallself}[op=store consent]{thiscovery-surveys}\end{umlcallself}
    \begin{umlcall}[op=transactional email, return=no content, padding=4]{thiscovery-surveys}{thiscovery-core}\end{umlcall}
    \begin{umlcallself}[op=process notifications]{thiscovery-core}
        \begin{umlcall}[dt=5, op=single send api, return=ok]{thiscovery-core}{HubSpot}
            \begin{umlcall}[op=copy of consent]{HubSpot}{User}\end{umlcall}
        \end{umlcall}
    \end{umlcallself}
\end{umlseqdiag}
\end{tikzpicture}
\caption{Sequence diagram of user consent processing}
\end{center}
\end{figure}

\section*{Notes}

\subsection*{Stored data}

\begin{center}
\begin{table}[h]
%\rowcolors{1}{blue!10}{blue!20}
\caption{ConsentData Dynamodb table}
\begin{tabular}{| c | c | c | c | c | c |}
\hline
\textbf{partition key} & \textbf{sort key}                 &                                        &                                       &                                  &                                           \\ \hline
project\_task\_id      & anon\_project\_specific\_user\_id & consent\_datetime & consent\_details & project\_id & anon\_user\_task\_id \\ \hline
\end{tabular}
\end{table}
\end{center}

\end{document}
